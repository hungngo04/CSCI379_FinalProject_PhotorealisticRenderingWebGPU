const _0x133bbc=_0x3072;(function(_0x27ba36,_0x39a6ba){const _0x27b026=_0x3072,_0xa546f9=_0x27ba36();while(!![]){try{const _0x5a09c6=-parseInt(_0x27b026(0x264))/0x1*(-parseInt(_0x27b026(0x1c4))/0x2)+parseInt(_0x27b026(0x200))/0x3*(parseInt(_0x27b026(0x1e4))/0x4)+-parseInt(_0x27b026(0x18b))/0x5*(-parseInt(_0x27b026(0x27e))/0x6)+-parseInt(_0x27b026(0x22f))/0x7*(parseInt(_0x27b026(0x1c6))/0x8)+-parseInt(_0x27b026(0x16f))/0x9*(-parseInt(_0x27b026(0x236))/0xa)+-parseInt(_0x27b026(0x2b9))/0xb*(-parseInt(_0x27b026(0x1fe))/0xc)+parseInt(_0x27b026(0x18a))/0xd*(-parseInt(_0x27b026(0x2a9))/0xe);if(_0x5a09c6===_0x39a6ba)break;else _0xa546f9['push'](_0xa546f9['shift']());}catch(_0x477038){_0xa546f9['push'](_0xa546f9['shift']());}}}(_0x64c7,0x439f4));class Renderer{constructor(_0x40959d){const _0x87fac0=_0x3072;this['_canvas']=_0x40959d,this[_0x87fac0(0x1c9)]=[],this[_0x87fac0(0x2a6)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async['init'](){const _0x28c15a=_0x3072;if(!navigator[_0x28c15a(0x2b6)])throw Error('WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.');const _0x515b25=await navigator['gpu'][_0x28c15a(0x1b1)]();if(!_0x515b25)throw Error(_0x28c15a(0x2c4));this[_0x28c15a(0x175)]=await _0x515b25['requestDevice'](),this[_0x28c15a(0x231)]=this[_0x28c15a(0x16c)]['getContext'](_0x28c15a(0x273)),this[_0x28c15a(0x16a)]=navigator[_0x28c15a(0x2b6)][_0x28c15a(0x184)](),this[_0x28c15a(0x231)]['configure']({'device':this['_device'],'format':this['_canvasFormat']}),this[_0x28c15a(0x170)](),window['addEventListener'](_0x28c15a(0x26a),this[_0x28c15a(0x170)][_0x28c15a(0x1a8)](this));}[_0x133bbc(0x170)](){const _0x55694f=_0x133bbc,_0x464260=window[_0x55694f(0x173)]||0x1,_0x56ceb2=window[_0x55694f(0x28f)]*_0x464260,_0x31aaab=window[_0x55694f(0x1a5)]*_0x464260;this[_0x55694f(0x16c)]['width']=_0x56ceb2,this['_canvas'][_0x55694f(0x23d)]=_0x31aaab,this[_0x55694f(0x16c)]['style'][_0x55694f(0x214)]=window[_0x55694f(0x28f)]+'px',this[_0x55694f(0x16c)][_0x55694f(0x27c)]['height']=window['innerHeight']+'px',this['_canvas'][_0x55694f(0x27c)][_0x55694f(0x285)]=_0x55694f(0x28d),this['render']();}async[_0x133bbc(0x1ae)](_0x363d78){const _0x25c01c=_0x133bbc;await _0x363d78[_0x25c01c(0x182)](),this[_0x25c01c(0x1c9)][_0x25c01c(0x1d3)](_0x363d78);}[_0x133bbc(0x1e1)](_0x4bec40){const _0x1a87dd=_0x133bbc;for(const _0x422b15 of this['_objects']){_0x422b15?.['updateGeometry']();}let _0x511cbf=this['_device'][_0x1a87dd(0x267)]();const _0x35caa8=_0x511cbf[_0x1a87dd(0x2be)]({'colorAttachments':[{'view':_0x4bec40,'clearValue':this['_clearColor'],'loadOp':_0x1a87dd(0x230),'storeOp':_0x1a87dd(0x1e6)}]});for(const _0xe25f49 of this[_0x1a87dd(0x1c9)]){_0xe25f49?.['render'](_0x35caa8);}_0x35caa8[_0x1a87dd(0x1c7)]();const _0x473d5f=_0x511cbf[_0x1a87dd(0x168)]();for(const _0x361ff0 of this['_objects']){_0x361ff0?.[_0x1a87dd(0x2c5)](_0x473d5f);}_0x473d5f[_0x1a87dd(0x1c7)]();const _0x59a2ef=_0x511cbf[_0x1a87dd(0x181)]();this[_0x1a87dd(0x175)][_0x1a87dd(0x1b3)][_0x1a87dd(0x238)]([_0x59a2ef]);}[_0x133bbc(0x244)](){const _0x57cb73=_0x133bbc;this['renderToSelectedView'](this['_context'][_0x57cb73(0x185)]()[_0x57cb73(0x1b5)]());}}class RayTracer extends Renderer{constructor(_0x581642){const _0x42b68b=_0x133bbc;super(_0x581642),this[_0x42b68b(0x167)]=null;}async[_0x133bbc(0x182)](){const _0x31de0b=_0x133bbc;if(!navigator['gpu'])throw Error(_0x31de0b(0x29d));const _0xb22432=await navigator['gpu'][_0x31de0b(0x1b1)]();if(!_0xb22432)throw Error(_0x31de0b(0x2c4));this[_0x31de0b(0x175)]=await _0xb22432['requestDevice'](),this[_0x31de0b(0x231)]=this[_0x31de0b(0x16c)]['getContext']('webgpu'),this['_canvasFormat']=_0x31de0b(0x223),this[_0x31de0b(0x231)][_0x31de0b(0x28b)]({'device':this[_0x31de0b(0x175)],'format':this[_0x31de0b(0x16a)]}),this[_0x31de0b(0x17d)]=this['_device'][_0x31de0b(0x288)]({'label':_0x31de0b(0x1fc),'code':'\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'}),this[_0x31de0b(0x1ce)]=this[_0x31de0b(0x175)][_0x31de0b(0x283)]({'label':_0x31de0b(0x248),'size':0x8,'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x31de0b(0x198)]}),this[_0x31de0b(0x20e)]=this[_0x31de0b(0x175)][_0x31de0b(0x1c8)]({'label':_0x31de0b(0x24e),'layout':_0x31de0b(0x1a2),'vertex':{'module':this[_0x31de0b(0x17d)],'entryPoint':_0x31de0b(0x29c)},'fragment':{'module':this[_0x31de0b(0x17d)],'entryPoint':_0x31de0b(0x269),'targets':[{'format':this[_0x31de0b(0x16a)]}]}}),this[_0x31de0b(0x203)]=this[_0x31de0b(0x175)][_0x31de0b(0x190)]({'label':_0x31de0b(0x2a0),'magFilter':_0x31de0b(0x2b5),'minFilter':_0x31de0b(0x2b5)}),this[_0x31de0b(0x170)](),window[_0x31de0b(0x1f8)](_0x31de0b(0x26a),this[_0x31de0b(0x170)][_0x31de0b(0x1a8)](this));}['resizeCanvas'](){const _0x1efdc9=_0x133bbc,_0x17f82a=window[_0x1efdc9(0x173)]||0x1,_0x3350e1=window[_0x1efdc9(0x28f)]*_0x17f82a,_0x3724df=window[_0x1efdc9(0x1a5)]*_0x17f82a,_0x3daa3b=_0x3350e1/_0x3724df,_0x4be1a9=_0x3724df;let _0x3b0fc6={'width':_0x4be1a9*_0x3daa3b,'height':_0x4be1a9};this['_offScreenTexture']=this[_0x1efdc9(0x175)]['createTexture']({'size':_0x3b0fc6,'format':this[_0x1efdc9(0x16a)],'usage':GPUTextureUsage[_0x1efdc9(0x18e)]|GPUTextureUsage[_0x1efdc9(0x21f)]}),this[_0x1efdc9(0x167)]&&(this[_0x1efdc9(0x167)][_0x1efdc9(0x26d)]=this[_0x1efdc9(0x2aa)][_0x1efdc9(0x214)],this[_0x1efdc9(0x167)][_0x1efdc9(0x19b)]=this['_offScreenTexture'][_0x1efdc9(0x23d)],this[_0x1efdc9(0x167)][_0x1efdc9(0x1c2)](),this['_tracer'][_0x1efdc9(0x297)](this[_0x1efdc9(0x2aa)])),this[_0x1efdc9(0x1b8)]=this[_0x1efdc9(0x175)][_0x1efdc9(0x297)]({'label':_0x1efdc9(0x27d),'layout':this[_0x1efdc9(0x20e)][_0x1efdc9(0x20a)](0x0),'entries':[{'binding':0x0,'resource':this['_offScreenTexture']['createView']()},{'binding':0x1,'resource':this['_sampler']},{'binding':0x2,'resource':{'buffer':this['_outputSizeBuffer']}}]}),super[_0x1efdc9(0x170)](),this[_0x1efdc9(0x175)]['queue']['writeBuffer'](this[_0x1efdc9(0x1ce)],0x0,new Float32Array([_0x3350e1,_0x3724df]));}async['setTracerObject'](_0x351d4f){const _0x275682=_0x133bbc;await _0x351d4f[_0x275682(0x182)](),_0x351d4f[_0x275682(0x26d)]=this[_0x275682(0x2aa)][_0x275682(0x214)],_0x351d4f[_0x275682(0x19b)]=this['_offScreenTexture'][_0x275682(0x23d)],_0x351d4f[_0x275682(0x1c2)](),this[_0x275682(0x167)]=_0x351d4f,this[_0x275682(0x167)]['createBindGroup'](this[_0x275682(0x2aa)]);}[_0x133bbc(0x244)](){const _0x4a4fd0=_0x133bbc;if(this['_tracer']){let _0x31ecf9=this[_0x4a4fd0(0x175)][_0x4a4fd0(0x267)]();const _0x2349b9=_0x31ecf9[_0x4a4fd0(0x168)]();this[_0x4a4fd0(0x167)][_0x4a4fd0(0x2c5)](_0x2349b9),_0x2349b9[_0x4a4fd0(0x1c7)](),this[_0x4a4fd0(0x175)][_0x4a4fd0(0x1b3)][_0x4a4fd0(0x238)]([_0x31ecf9[_0x4a4fd0(0x181)]()]);}let _0x545485=this[_0x4a4fd0(0x175)][_0x4a4fd0(0x267)]();const _0x2f4d6f=_0x545485['beginRenderPass']({'colorAttachments':[{'view':this['_context'][_0x4a4fd0(0x185)]()[_0x4a4fd0(0x1b5)](),'clearValue':this['_clearColor'],'loadOp':_0x4a4fd0(0x230),'storeOp':_0x4a4fd0(0x1e6)}]});_0x2f4d6f['setPipeline'](this[_0x4a4fd0(0x20e)]),_0x2f4d6f['setBindGroup'](0x0,this[_0x4a4fd0(0x1b8)]),_0x2f4d6f[_0x4a4fd0(0x1df)](0x6),_0x2f4d6f['end'](),this[_0x4a4fd0(0x175)][_0x4a4fd0(0x1b3)][_0x4a4fd0(0x238)]([_0x545485[_0x4a4fd0(0x181)]()]);}};class SceneObject{static [_0x133bbc(0x2ac)]=0x0;constructor(_0x130230,_0x317b0f){const _0x4b55c9=_0x133bbc;if(this[_0x4b55c9(0x191)]==SceneObject)throw new Error(_0x4b55c9(0x26c));this[_0x4b55c9(0x175)]=_0x130230,this[_0x4b55c9(0x16a)]=_0x317b0f,SceneObject[_0x4b55c9(0x2ac)]+=0x1;}[_0x133bbc(0x225)](){const _0x1834f5=_0x133bbc;return this[_0x1834f5(0x191)][_0x1834f5(0x1a6)]+'\x20'+SceneObject[_0x1834f5(0x2ac)]['toString']();}async[_0x133bbc(0x182)](){const _0x2fd942=_0x133bbc;await this[_0x2fd942(0x2b1)](),await this[_0x2fd942(0x246)](),await this[_0x2fd942(0x1c8)](),await this[_0x2fd942(0x1cd)]();}async[_0x133bbc(0x2b1)](){const _0x2d278a=_0x133bbc;throw new Error(_0x2d278a(0x2a5));}[_0x133bbc(0x1c2)](){}[_0x133bbc(0x1cb)](_0x514959){return new Promise((_0x51fd41,_0x31cc3c)=>{const _0x2b5fc2=_0x3072,_0xe32ab3=new XMLHttpRequest();_0xe32ab3[_0x2b5fc2(0x286)]('GET',_0x514959),_0xe32ab3[_0x2b5fc2(0x1bf)](_0x2b5fc2(0x250),_0x2b5fc2(0x199)),_0xe32ab3['onload']=function(){const _0x3c0932=_0x2b5fc2;_0xe32ab3[_0x3c0932(0x29f)]===XMLHttpRequest[_0x3c0932(0x24d)]&&_0xe32ab3[_0x3c0932(0x1bd)]===0xc8?_0x51fd41(_0xe32ab3['responseText']):_0x31cc3c({'status':_0xe32ab3['status'],'statusText':_0xe32ab3[_0x3c0932(0x1be)]});},_0xe32ab3[_0x2b5fc2(0x25c)]=function(){const _0x57a209=_0x2b5fc2;_0x31cc3c({'status':_0xe32ab3[_0x57a209(0x1bd)],'statusText':_0xe32ab3[_0x57a209(0x1be)]});},_0xe32ab3['send']();});}async['createShaders'](){const _0xd8a07d=_0x133bbc;throw new Error(_0xd8a07d(0x295));}async['createRenderPipeline'](){const _0x53a81b=_0x133bbc;throw new Error(_0x53a81b(0x221));}[_0x133bbc(0x244)](_0x4ea4ff){const _0x3a115f=_0x133bbc;throw new Error(_0x3a115f(0x180));}async['createComputePipeline'](){const _0x1a8b9b=_0x133bbc;throw new Error(_0x1a8b9b(0x20b));}[_0x133bbc(0x2c5)](_0x36c68d){const _0x345f81=_0x133bbc;throw new Error(_0x345f81(0x18f));}}class RayTracingObject extends SceneObject{async[_0x133bbc(0x2b1)](){}async[_0x133bbc(0x246)](){const _0x38aa6c=_0x133bbc;let _0x2bb192=await this[_0x38aa6c(0x1cb)]('./shaders/optimized_tracenothing.wgsl');this[_0x38aa6c(0x17d)]=this['_device'][_0x38aa6c(0x288)]({'label':'\x20Shader\x20'+this[_0x38aa6c(0x225)](),'code':_0x2bb192});}[_0x133bbc(0x1c2)](){}async[_0x133bbc(0x1c8)](){}[_0x133bbc(0x244)](_0x3da6bc){}async[_0x133bbc(0x1cd)](){const _0x213f56=_0x133bbc;this[_0x213f56(0x275)]=this[_0x213f56(0x175)][_0x213f56(0x1cd)]({'label':_0x213f56(0x197)+this[_0x213f56(0x225)](),'layout':_0x213f56(0x1a2),'compute':{'module':this[_0x213f56(0x17d)],'entryPoint':_0x213f56(0x23f)}});}[_0x133bbc(0x297)](_0x50c981){const _0x48b5b7=_0x133bbc;this[_0x48b5b7(0x1b8)]=this['_device'][_0x48b5b7(0x297)]({'label':'Ray\x20Tracing\x20Bind\x20Group','layout':this[_0x48b5b7(0x275)][_0x48b5b7(0x20a)](0x0),'entries':[{'binding':0x0,'resource':_0x50c981[_0x48b5b7(0x1b5)]()}]}),this['_wgWidth']=Math['ceil'](_0x50c981[_0x48b5b7(0x214)]),this[_0x48b5b7(0x287)]=Math[_0x48b5b7(0x1e5)](_0x50c981[_0x48b5b7(0x23d)]);}[_0x133bbc(0x2c5)](_0x1f2064){const _0x1e2fcd=_0x133bbc;_0x1f2064['setPipeline'](this[_0x1e2fcd(0x275)]),_0x1f2064[_0x1e2fcd(0x2c1)](0x0,this[_0x1e2fcd(0x1b8)]),_0x1f2064[_0x1e2fcd(0x222)](Math[_0x1e2fcd(0x1e5)](this[_0x1e2fcd(0x237)]/0x10),Math['ceil'](this[_0x1e2fcd(0x287)]/0x10));}}class VolumeByteIO{constructor(){}static[_0x133bbc(0x1d5)](_0x883478){return new Promise((_0x2c0ca3,_0x2b1e5b)=>{const _0x2f6e92=_0x3072,_0x51d34c=new XMLHttpRequest();_0x51d34c['open'](_0x2f6e92(0x18c),_0x883478),_0x51d34c[_0x2f6e92(0x1bf)](_0x2f6e92(0x250),'no-cache,\x20no-store,\x20max-age=0'),_0x51d34c[_0x2f6e92(0x26e)]=_0x2f6e92(0x1b6),_0x51d34c[_0x2f6e92(0x28a)]=function(){const _0x4bb67f=_0x2f6e92;_0x51d34c[_0x4bb67f(0x29f)]===XMLHttpRequest['DONE']&&_0x51d34c['status']===0xc8?_0x2c0ca3(_0x51d34c[_0x4bb67f(0x276)]):_0x2b1e5b(new Error('Error\x20loading\x20volume\x20byte\x20data:\x20'+_0x51d34c[_0x4bb67f(0x1bd)]));},_0x51d34c[_0x2f6e92(0x25c)]=function(){const _0x3dc23b=_0x2f6e92;_0x2b1e5b(new Error(_0x3dc23b(0x16d)));},_0x51d34c['send']();});}static[_0x133bbc(0x2bf)](_0x4db825,_0x116c98,_0x402570,_0x16e1ab){const _0x14f011=_0x133bbc;switch(_0x16e1ab){case _0x14f011(0x298):return[_0x4db825[_0x14f011(0x1d6)](_0x116c98,0x1)];break;case _0x14f011(0x192):return[_0x4db825[_0x14f011(0x2cb)](_0x116c98,0x1)];break;case'short':return[_0x4db825[_0x14f011(0x189)](_0x116c98,_0x402570),0x2];break;case _0x14f011(0x28e):return[_0x4db825[_0x14f011(0x2b2)](_0x116c98,_0x402570),0x2];break;case _0x14f011(0x1a0):return[_0x4db825['getInt32'](_0x116c98,_0x402570),0x4];break;case _0x14f011(0x229):return[_0x4db825['getUint32'](_0x116c98,_0x402570),0x4];break;case _0x14f011(0x2a1):return[_0x4db825[_0x14f011(0x1fd)](_0x116c98,_0x402570),0x4];break;case _0x14f011(0x2bb):return[_0x4db825[_0x14f011(0x242)](_0x116c98,_0x402570),0x8];break;}}static async[_0x133bbc(0x2c2)](_0x287718){const _0x21452d=_0x133bbc;let _0x434618=await VolumeByteIO['readBinary'](_0x287718),_0x125a0c=new TextDecoder()['decode'](_0x434618);const _0x2de65d=[0xb5,0xd9,0xb5],_0x1704a3=[0x1,0x1,0x1],_0x3849f7=[];let _0x49838f=0x0,_0x3cf7c7=new DataView(_0x434618);for(let _0x53ed76=0x0;_0x53ed76<_0x2de65d['reduce']((_0x14eb30,_0x560cfe)=>_0x14eb30*_0x560cfe,0x1);++_0x53ed76){const [_0x4bd78e,_0x185968]=VolumeByteIO[_0x21452d(0x2bf)](_0x3cf7c7,_0x49838f,!![],'short');_0x3849f7[_0x21452d(0x1d3)](_0x4bd78e),_0x49838f+=_0x185968;}return[_0x2de65d,_0x1704a3,_0x3849f7];}static['isLittleEndian'](){const _0x536037=_0x133bbc,_0x150b5b=new ArrayBuffer(0x2),_0x24f7f7=new DataView(_0x150b5b);return _0x24f7f7[_0x536037(0x274)](0x0,0x100,!![]),_0x24f7f7[_0x536037(0x1d6)](0x0)===0x0;}static async[_0x133bbc(0x17b)](_0x414964,_0x3ea689){const _0x55fb24=_0x133bbc,_0x32256a=new Uint8Array(_0x414964[_0x55fb24(0x1cc)][_0x55fb24(0x26b)]*0x2);_0x414964['data'][_0x55fb24(0x21b)]((_0x5b4ba0,_0x53f3c4)=>{const _0x5a9081=_0x55fb24,_0x1e4c08=new Uint16Array([_0x5b4ba0]);_0x32256a[_0x5a9081(0x241)](new Uint8Array(_0x1e4c08[_0x5a9081(0x23a)]),_0x53f3c4*0x2);});const _0x5ceff1=new Blob([_0x32256a],{'type':_0x55fb24(0x29e)}),_0x2f078b=document[_0x55fb24(0x265)]('a');_0x2f078b[_0x55fb24(0x172)]=URL[_0x55fb24(0x2ba)](_0x5ceff1),_0x2f078b['download']='download.raws',_0x2f078b[_0x55fb24(0x29a)](),URL[_0x55fb24(0x284)](_0x2f078b[_0x55fb24(0x172)]);}}class VolumeData{constructor(_0x125061){const _0x3e72d7=_0x133bbc;this[_0x3e72d7(0x249)]=_0x125061;}async[_0x133bbc(0x182)](){const _0x2ae7de=_0x133bbc,[_0x3aaed0,_0x309b31,_0x2e82a4]=await VolumeByteIO[_0x2ae7de(0x2c2)](this[_0x2ae7de(0x249)]);this[_0x2ae7de(0x2a7)]=_0x3aaed0,this[_0x2ae7de(0x1b4)]=_0x309b31,this[_0x2ae7de(0x259)]=_0x2e82a4;}}class VolumeRenderingSimpleObject extends RayTracingObject{constructor(_0x3dd103,_0x382410,_0x3f9a34,_0x368c8c){const _0x5b3a6f=_0x133bbc;super(_0x3dd103,_0x382410),this[_0x5b3a6f(0x289)]=new VolumeData('./assets/brainweb-t1-1mm-pn0-rf0.raws'),this[_0x5b3a6f(0x19d)]=_0x3f9a34,this[_0x5b3a6f(0x202)]=0x3,this[_0x5b3a6f(0x1e9)]=_0x368c8c,this[_0x5b3a6f(0x169)]={'boneBoundary':[0.96,0.91,0.86],'boneInterior':[0.92,0.86,0.78],'whiteMatterBoundary':[0.95,0.62,0.55],'whiteMatterInterior':[0.92,0.58,0.52],'grayMatterBoundary':[0.89,0.55,0.5],'grayMatterInterior':[0.85,0.48,0.45],'csf':[0.9,0.65,0.6]};}[_0x133bbc(0x174)](_0x246f00){const _0x1b5fd1=_0x133bbc;this[_0x1b5fd1(0x202)]=_0x246f00,this['_device']['queue']['writeBuffer'](this[_0x1b5fd1(0x1cf)],0x0,new Uint32Array([this['_traceType']]));}['setUseTrilinear'](_0x3fed6b){const _0x3d959b=_0x133bbc;this['_useTrilinear']=_0x3fed6b?0x1:0x0,this['_useTrilinearBuffer']&&this['_device'][_0x3d959b(0x1b3)][_0x3d959b(0x1f9)](this[_0x3d959b(0x1ff)],0x0,new Uint32Array([this[_0x3d959b(0x1e9)]]));}[_0x133bbc(0x2a2)](_0xee1f89,_0x83493c){const _0x9c67f6=_0x133bbc;switch(_0xee1f89){case'boneBoundary':this[_0x9c67f6(0x169)]['boneBoundary']=_0x83493c;break;case _0x9c67f6(0x2ae):this[_0x9c67f6(0x169)]['boneInterior']=_0x83493c;break;case _0x9c67f6(0x196):this[_0x9c67f6(0x169)]['whiteMatterBoundary']=_0x83493c;break;case'whiteMatterInterior':this[_0x9c67f6(0x169)]['whiteMatterInterior']=_0x83493c;break;case _0x9c67f6(0x1ef):this[_0x9c67f6(0x169)][_0x9c67f6(0x1ef)]=_0x83493c;break;case'grayMatterInterior':this[_0x9c67f6(0x169)][_0x9c67f6(0x179)]=_0x83493c;break;case _0x9c67f6(0x1eb):this[_0x9c67f6(0x169)][_0x9c67f6(0x1eb)]=_0x83493c;break;}this[_0x9c67f6(0x2a8)]();}[_0x133bbc(0x2a8)](){const _0x55c28e=_0x133bbc;if(!this['_tissueColorsBuffer'])return;const _0x1fb78f=new Float32Array([...this[_0x55c28e(0x169)][_0x55c28e(0x2ab)],0x0,...this[_0x55c28e(0x169)]['boneInterior'],0x0,...this[_0x55c28e(0x169)][_0x55c28e(0x196)],0x0,...this[_0x55c28e(0x169)][_0x55c28e(0x1a9)],0x0,...this[_0x55c28e(0x169)][_0x55c28e(0x1ef)],0x0,...this['_tissueColors'][_0x55c28e(0x179)],0x0,...this[_0x55c28e(0x169)]['csf'],0x0]);this['_device'][_0x55c28e(0x1b3)][_0x55c28e(0x1f9)](this[_0x55c28e(0x21e)],0x0,_0x1fb78f);}async[_0x133bbc(0x2b1)](){const _0x5c0f22=_0x133bbc;await this['_volume'][_0x5c0f22(0x182)](),this['_cameraBuffer']=this[_0x5c0f22(0x175)][_0x5c0f22(0x283)]({'label':_0x5c0f22(0x208)+this['getName'](),'size':this[_0x5c0f22(0x19d)][_0x5c0f22(0x193)]['byteLength']+this['_camera']['_focal']['byteLength']+this['_camera'][_0x5c0f22(0x216)][_0x5c0f22(0x27b)],'usage':GPUBufferUsage[_0x5c0f22(0x17a)]|GPUBufferUsage['COPY_DST']}),this[_0x5c0f22(0x175)][_0x5c0f22(0x1b3)][_0x5c0f22(0x1f9)](this['_cameraBuffer'],0x0,this['_camera']['_pose']),this['_device'][_0x5c0f22(0x1b3)][_0x5c0f22(0x1f9)](this[_0x5c0f22(0x279)],this[_0x5c0f22(0x19d)][_0x5c0f22(0x193)][_0x5c0f22(0x27b)],this[_0x5c0f22(0x19d)][_0x5c0f22(0x282)]),this[_0x5c0f22(0x175)][_0x5c0f22(0x1b3)][_0x5c0f22(0x1f9)](this[_0x5c0f22(0x279)],this[_0x5c0f22(0x19d)]['_pose'][_0x5c0f22(0x27b)]+this['_camera'][_0x5c0f22(0x282)]['byteLength'],this['_camera'][_0x5c0f22(0x216)]),this[_0x5c0f22(0x22c)]=this[_0x5c0f22(0x175)][_0x5c0f22(0x283)]({'label':_0x5c0f22(0x1e2)+this[_0x5c0f22(0x225)](),'size':(this[_0x5c0f22(0x289)][_0x5c0f22(0x2a7)][_0x5c0f22(0x26b)]+this['_volume'][_0x5c0f22(0x1b4)][_0x5c0f22(0x26b)]+0x2)*Float32Array[_0x5c0f22(0x1ec)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x5c0f22(0x198)]}),this[_0x5c0f22(0x175)][_0x5c0f22(0x1b3)][_0x5c0f22(0x1f9)](this[_0x5c0f22(0x22c)],0x0,new Float32Array([...this[_0x5c0f22(0x289)][_0x5c0f22(0x2a7)],0x0,...this[_0x5c0f22(0x289)]['_sizes'],0x0])),this['_dataBuffer']=this[_0x5c0f22(0x175)][_0x5c0f22(0x283)]({'label':'Data\x20'+this[_0x5c0f22(0x225)](),'size':this[_0x5c0f22(0x289)][_0x5c0f22(0x259)][_0x5c0f22(0x26b)]*Float32Array['BYTES_PER_ELEMENT'],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x5c0f22(0x198)]}),this[_0x5c0f22(0x1cf)]=this[_0x5c0f22(0x175)][_0x5c0f22(0x283)]({'label':_0x5c0f22(0x1e7)+this[_0x5c0f22(0x225)](),'size':Uint32Array[_0x5c0f22(0x1ec)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x5c0f22(0x198)]}),this['_device'][_0x5c0f22(0x1b3)][_0x5c0f22(0x1f9)](this[_0x5c0f22(0x1cf)],0x0,new Uint32Array([this[_0x5c0f22(0x202)]])),this[_0x5c0f22(0x1c1)]=this[_0x5c0f22(0x175)][_0x5c0f22(0x283)]({'label':_0x5c0f22(0x2cc)+this[_0x5c0f22(0x225)](),'size':0x10,'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage['COPY_DST']}),this['_lightBuffer']=this[_0x5c0f22(0x175)][_0x5c0f22(0x283)]({'label':_0x5c0f22(0x235)+this[_0x5c0f22(0x225)](),'size':0x8*Float32Array[_0x5c0f22(0x1ec)],'usage':GPUBufferUsage[_0x5c0f22(0x17a)]|GPUBufferUsage[_0x5c0f22(0x198)]});const _0x12f5fa=new Float32Array([0x0,0x0,-0x2,0.8,0x1,0x1,0x1,0x0]);this['_device'][_0x5c0f22(0x1b3)]['writeBuffer'](this['_lightBuffer'],0x0,_0x12f5fa),this['_useTrilinearBuffer']=this['_device'][_0x5c0f22(0x283)]({'label':'UseTrilinear\x20'+this[_0x5c0f22(0x225)](),'size':Uint32Array[_0x5c0f22(0x1ec)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x5c0f22(0x198)]}),this['_device'][_0x5c0f22(0x1b3)][_0x5c0f22(0x1f9)](this['_useTrilinearBuffer'],0x0,new Uint32Array([this[_0x5c0f22(0x1e9)]?0x1:0x0])),this[_0x5c0f22(0x21e)]=this['_device']['createBuffer']({'label':_0x5c0f22(0x1ba)+this[_0x5c0f22(0x225)](),'size':0x1c*Float32Array[_0x5c0f22(0x1ec)],'usage':GPUBufferUsage[_0x5c0f22(0x17a)]|GPUBufferUsage[_0x5c0f22(0x198)]}),this[_0x5c0f22(0x2a8)](),this[_0x5c0f22(0x175)][_0x5c0f22(0x1b3)][_0x5c0f22(0x1f9)](this[_0x5c0f22(0x240)],0x0,new Float32Array(this[_0x5c0f22(0x289)][_0x5c0f22(0x259)]));}['updateGeometry'](){const _0x447f31=_0x133bbc;this[_0x447f31(0x19d)][_0x447f31(0x252)](this[_0x447f31(0x26d)],this[_0x447f31(0x19b)]),this['_device']['queue']['writeBuffer'](this[_0x447f31(0x279)],this[_0x447f31(0x19d)][_0x447f31(0x193)][_0x447f31(0x27b)]+this[_0x447f31(0x19d)][_0x447f31(0x282)]['byteLength'],this[_0x447f31(0x19d)]['_resolutions']);}[_0x133bbc(0x2c8)](){const _0x171042=_0x133bbc;this[_0x171042(0x175)]['queue'][_0x171042(0x1f9)](this['_cameraBuffer'],0x0,this[_0x171042(0x19d)]['_pose']);}[_0x133bbc(0x1bc)](){const _0x508b3a=_0x133bbc;this[_0x508b3a(0x175)][_0x508b3a(0x1b3)][_0x508b3a(0x1f9)](this['_cameraBuffer'],this['_camera'][_0x508b3a(0x193)][_0x508b3a(0x27b)],this[_0x508b3a(0x19d)]['_focal']);}async[_0x133bbc(0x246)](){const _0x609db9=_0x133bbc;let _0x2120ba=await this[_0x609db9(0x1cb)](_0x609db9(0x187));this[_0x609db9(0x17d)]=this[_0x609db9(0x175)]['createShaderModule']({'label':_0x609db9(0x2af)+this[_0x609db9(0x225)](),'code':_0x2120ba}),this[_0x609db9(0x2ad)]=this[_0x609db9(0x175)][_0x609db9(0x2c6)]({'label':'Ray\x20Trace\x20Volume\x20Layout\x20'+this[_0x609db9(0x225)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x609db9(0x2a4)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x609db9(0x2a4)],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage[_0x609db9(0x2a4)],'buffer':{'type':_0x609db9(0x16b)}},{'binding':0x3,'visibility':GPUShaderStage[_0x609db9(0x2a4)],'storageTexture':{'format':this[_0x609db9(0x16a)]}},{'binding':0x4,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x5,'visibility':GPUShaderStage[_0x609db9(0x2a4)],'buffer':{}},{'binding':0x6,'visibility':GPUShaderStage[_0x609db9(0x2a4)],'buffer':{}},{'binding':0x7,'visibility':GPUShaderStage[_0x609db9(0x2a4)],'buffer':{}},{'binding':0x8,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}}]}),this[_0x609db9(0x243)]=this[_0x609db9(0x175)][_0x609db9(0x1b7)]({'label':'Ray\x20Trace\x20Volume\x20Pipeline\x20Layout','bindGroupLayouts':[this[_0x609db9(0x2ad)]]});}async[_0x133bbc(0x1cd)](){const _0x512e24=_0x133bbc;this['_computePipeline']=this[_0x512e24(0x175)][_0x512e24(0x1cd)]({'label':_0x512e24(0x19f)+this[_0x512e24(0x225)](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x512e24(0x17d)],'entryPoint':_0x512e24(0x1b0)}}),this[_0x512e24(0x218)]=this[_0x512e24(0x175)][_0x512e24(0x1cd)]({'label':_0x512e24(0x255)+this[_0x512e24(0x225)](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x512e24(0x17d)],'entryPoint':_0x512e24(0x1d9)}});}['createBindGroup'](_0x46d5cf){const _0x373839=_0x133bbc;this[_0x373839(0x1b8)]=this[_0x373839(0x175)][_0x373839(0x297)]({'label':'Ray\x20Trace\x20Volume\x20Bind\x20Group','layout':this[_0x373839(0x275)][_0x373839(0x20a)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x373839(0x279)]}},{'binding':0x1,'resource':{'buffer':this['_volumeBuffer']}},{'binding':0x2,'resource':{'buffer':this[_0x373839(0x240)]}},{'binding':0x3,'resource':_0x46d5cf[_0x373839(0x1b5)]()},{'binding':0x4,'resource':{'buffer':this['_traceTypeBuffer']}},{'binding':0x5,'resource':{'buffer':this[_0x373839(0x1c1)]}},{'binding':0x6,'resource':{'buffer':this[_0x373839(0x1f7)]}},{'binding':0x7,'resource':{'buffer':this[_0x373839(0x1ff)]}},{'binding':0x8,'resource':{'buffer':this['_tissueColorsBuffer']}}]}),this[_0x373839(0x237)]=Math[_0x373839(0x1e5)](_0x46d5cf['width']),this['_wgHeight']=Math['ceil'](_0x46d5cf['height']);}['compute'](_0x1f8488){const _0x20d774=_0x133bbc;this['_camera']?.[_0x20d774(0x21c)]?_0x1f8488[_0x20d774(0x1f0)](this[_0x20d774(0x218)]):_0x1f8488[_0x20d774(0x1f0)](this[_0x20d774(0x275)]),_0x1f8488[_0x20d774(0x2c1)](0x0,this[_0x20d774(0x1b8)]),_0x1f8488[_0x20d774(0x222)](Math[_0x20d774(0x1e5)](this[_0x20d774(0x237)]/0x10),Math[_0x20d774(0x1e5)](this[_0x20d774(0x287)]/0x10));}};class PGA3D{static[_0x133bbc(0x1c0)](_0x3cce19,_0x5e6952){return[_0x3cce19[0x0]*_0x5e6952[0x0]-_0x3cce19[0x1]*_0x5e6952[0x1]-_0x3cce19[0x2]*_0x5e6952[0x2]-_0x3cce19[0x3]*_0x5e6952[0x3]-_0x3cce19[0x7]*_0x5e6952[0x7]+_0x3cce19[0xb]*_0x5e6952[0xb]+_0x3cce19[0xc]*_0x5e6952[0xc]+_0x3cce19[0xd]*_0x5e6952[0xd],_0x3cce19[0x0]*_0x5e6952[0x1]+_0x3cce19[0x1]*_0x5e6952[0x0]-_0x3cce19[0x2]*_0x5e6952[0x3]+_0x3cce19[0x3]*_0x5e6952[0x2]+_0x3cce19[0x7]*_0x5e6952[0xd]+_0x3cce19[0xb]*_0x5e6952[0xc]-_0x3cce19[0xc]*_0x5e6952[0xb]+_0x3cce19[0xd]*_0x5e6952[0x7],_0x3cce19[0x0]*_0x5e6952[0x2]+_0x3cce19[0x1]*_0x5e6952[0x3]+_0x3cce19[0x2]*_0x5e6952[0x0]-_0x3cce19[0x3]*_0x5e6952[0x1]-_0x3cce19[0x7]*_0x5e6952[0xc]+_0x3cce19[0xb]*_0x5e6952[0xd]-_0x3cce19[0xc]*_0x5e6952[0x7]-_0x3cce19[0xd]*_0x5e6952[0xb],_0x3cce19[0x0]*_0x5e6952[0x3]-_0x3cce19[0x1]*_0x5e6952[0x2]+_0x3cce19[0x2]*_0x5e6952[0x1]+_0x3cce19[0x3]*_0x5e6952[0x0]+_0x3cce19[0x7]*_0x5e6952[0xb]+_0x3cce19[0xb]*_0x5e6952[0x7]+_0x3cce19[0xc]*_0x5e6952[0xd]-_0x3cce19[0xd]*_0x5e6952[0xc],_0x3cce19[0x0]*_0x5e6952[0x4]+_0x3cce19[0x1]*_0x5e6952[0x5]+_0x3cce19[0x2]*_0x5e6952[0x6]-_0x3cce19[0x3]*_0x5e6952[0xf]+_0x3cce19[0x4]*_0x5e6952[0x0]-_0x3cce19[0x5]*_0x5e6952[0x1]-_0x3cce19[0x6]*_0x5e6952[0x2]+_0x3cce19[0x7]*_0x5e6952[0xa]+_0x3cce19[0x8]*_0x5e6952[0xc]+_0x3cce19[0x9]*_0x5e6952[0xd]-_0x3cce19[0xa]*_0x5e6952[0x7]-_0x3cce19[0xb]*_0x5e6952[0xe]+_0x3cce19[0xc]*_0x5e6952[0x8]+_0x3cce19[0xd]*_0x5e6952[0x9]+_0x3cce19[0xe]*_0x5e6952[0xb]-_0x3cce19[0xf]*_0x5e6952[0x3],_0x3cce19[0x0]*_0x5e6952[0x5]-_0x3cce19[0x1]*_0x5e6952[0x4]+_0x3cce19[0x2]*_0x5e6952[0xf]+_0x3cce19[0x3]*_0x5e6952[0x6]+_0x3cce19[0x4]*_0x5e6952[0x1]+_0x3cce19[0x5]*_0x5e6952[0x0]-_0x3cce19[0x6]*_0x5e6952[0x3]-_0x3cce19[0x7]*_0x5e6952[0x9]-_0x3cce19[0x8]*_0x5e6952[0xb]+_0x3cce19[0x9]*_0x5e6952[0x7]+_0x3cce19[0xa]*_0x5e6952[0xc]-_0x3cce19[0xb]*_0x5e6952[0x8]-_0x3cce19[0xc]*_0x5e6952[0xe]+_0x3cce19[0xd]*_0x5e6952[0xa]+_0x3cce19[0xe]*_0x5e6952[0xc]+_0x3cce19[0xf]*_0x5e6952[0x2],_0x3cce19[0x0]*_0x5e6952[0x6]-_0x3cce19[0x1]*_0x5e6952[0xf]-_0x3cce19[0x2]*_0x5e6952[0x4]-_0x3cce19[0x3]*_0x5e6952[0x5]+_0x3cce19[0x4]*_0x5e6952[0x2]+_0x3cce19[0x5]*_0x5e6952[0x3]+_0x3cce19[0x6]*_0x5e6952[0x0]+_0x3cce19[0x7]*_0x5e6952[0x8]-_0x3cce19[0x8]*_0x5e6952[0x7]-_0x3cce19[0x9]*_0x5e6952[0xb]-_0x3cce19[0xa]*_0x5e6952[0xc]-_0x3cce19[0xb]*_0x5e6952[0x9]-_0x3cce19[0xc]*_0x5e6952[0xa]-_0x3cce19[0xd]*_0x5e6952[0xe]+_0x3cce19[0xe]*_0x5e6952[0xd]-_0x3cce19[0xf]*_0x5e6952[0x1],_0x3cce19[0x0]*_0x5e6952[0x7]+_0x3cce19[0x1]*_0x5e6952[0xd]-_0x3cce19[0x2]*_0x5e6952[0xc]+_0x3cce19[0x3]*_0x5e6952[0xb]+_0x3cce19[0x7]*_0x5e6952[0x0]+_0x3cce19[0xb]*_0x5e6952[0x3]-_0x3cce19[0xc]*_0x5e6952[0x2]+_0x3cce19[0xd]*_0x5e6952[0x1],_0x3cce19[0x0]*_0x5e6952[0x8]+_0x3cce19[0x1]*_0x5e6952[0xe]-_0x3cce19[0x2]*_0x5e6952[0xa]+_0x3cce19[0x3]*_0x5e6952[0x9]+_0x3cce19[0x4]*_0x5e6952[0xc]-_0x3cce19[0x5]*_0x5e6952[0xb]+_0x3cce19[0x6]*_0x5e6952[0x7]-_0x3cce19[0x7]*_0x5e6952[0x6]+_0x3cce19[0x8]*_0x5e6952[0x0]-_0x3cce19[0x9]*_0x5e6952[0x3]+_0x3cce19[0xa]*_0x5e6952[0x2]-_0x3cce19[0xb]*_0x5e6952[0x5]+_0x3cce19[0xc]*_0x5e6952[0x4]-_0x3cce19[0xd]*_0x5e6952[0xf]+_0x3cce19[0xe]*_0x5e6952[0x1]+_0x3cce19[0xf]*_0x5e6952[0xd],_0x3cce19[0x0]*_0x5e6952[0x9]+_0x3cce19[0x1]*_0x5e6952[0xa]+_0x3cce19[0x2]*_0x5e6952[0xe]-_0x3cce19[0x3]*_0x5e6952[0x8]+_0x3cce19[0x4]*_0x5e6952[0xd]-_0x3cce19[0x5]*_0x5e6952[0x7]-_0x3cce19[0x6]*_0x5e6952[0xb]+_0x3cce19[0x7]*_0x5e6952[0x5]+_0x3cce19[0x8]*_0x5e6952[0x3]+_0x3cce19[0x9]*_0x5e6952[0x0]-_0x3cce19[0xa]*_0x5e6952[0x1]-_0x3cce19[0xb]*_0x5e6952[0x6]+_0x3cce19[0xc]*_0x5e6952[0xf]+_0x3cce19[0xd]*_0x5e6952[0x4]+_0x3cce19[0xe]*_0x5e6952[0x2]-_0x3cce19[0xf]*_0x5e6952[0xc],_0x3cce19[0x0]*_0x5e6952[0xa]-_0x3cce19[0x1]*_0x5e6952[0x9]+_0x3cce19[0x2]*_0x5e6952[0x8]+_0x3cce19[0x3]*_0x5e6952[0xe]+_0x3cce19[0x4]*_0x5e6952[0x7]+_0x3cce19[0x5]*_0x5e6952[0xd]-_0x3cce19[0x6]*_0x5e6952[0xc]-_0x3cce19[0x7]*_0x5e6952[0x4]-_0x3cce19[0x8]*_0x5e6952[0x2]+_0x3cce19[0x9]*_0x5e6952[0x1]+_0x3cce19[0xa]*_0x5e6952[0x0]-_0x3cce19[0xb]*_0x5e6952[0xf]-_0x3cce19[0xc]*_0x5e6952[0x6]+_0x3cce19[0xd]*_0x5e6952[0x5]+_0x3cce19[0xe]*_0x5e6952[0x3]+_0x3cce19[0xf]*_0x5e6952[0xb],_0x3cce19[0x0]*_0x5e6952[0xb]+_0x3cce19[0x1]*_0x5e6952[0xc]+_0x3cce19[0x2]*_0x5e6952[0xd]-_0x3cce19[0x3]*_0x5e6952[0x7]-_0x3cce19[0x7]*_0x5e6952[0x3]+_0x3cce19[0xb]*_0x5e6952[0x0]-_0x3cce19[0xc]*_0x5e6952[0x1]-_0x3cce19[0xd]*_0x5e6952[0x2],_0x3cce19[0x0]*_0x5e6952[0xc]-_0x3cce19[0x1]*_0x5e6952[0xb]+_0x3cce19[0x2]*_0x5e6952[0x7]+_0x3cce19[0x3]*_0x5e6952[0xd]+_0x3cce19[0x7]*_0x5e6952[0x2]+_0x3cce19[0xb]*_0x5e6952[0x1]+_0x3cce19[0xc]*_0x5e6952[0x0]-_0x3cce19[0xd]*_0x5e6952[0x3],_0x3cce19[0x0]*_0x5e6952[0xd]-_0x3cce19[0x1]*_0x5e6952[0x7]-_0x3cce19[0x2]*_0x5e6952[0xb]-_0x3cce19[0x3]*_0x5e6952[0xc]-_0x3cce19[0x7]*_0x5e6952[0x1]+_0x3cce19[0xb]*_0x5e6952[0x2]+_0x3cce19[0xc]*_0x5e6952[0x3]+_0x3cce19[0xd]*_0x5e6952[0x0],_0x3cce19[0x0]*_0x5e6952[0xe]-_0x3cce19[0x1]*_0x5e6952[0x8]-_0x3cce19[0x2]*_0x5e6952[0x9]-_0x3cce19[0x3]*_0x5e6952[0xa]+_0x3cce19[0x4]*_0x5e6952[0xb]+_0x3cce19[0x5]*_0x5e6952[0xc]+_0x3cce19[0x6]*_0x5e6952[0xd]+_0x3cce19[0x7]*_0x5e6952[0xf]-_0x3cce19[0x8]*_0x5e6952[0x1]-_0x3cce19[0x9]*_0x5e6952[0x2]-_0x3cce19[0xa]*_0x5e6952[0x3]-_0x3cce19[0xb]*_0x5e6952[0x4]-_0x3cce19[0xc]*_0x5e6952[0x5]-_0x3cce19[0xd]*_0x5e6952[0x6]+_0x3cce19[0xe]*_0x5e6952[0x0]-_0x3cce19[0xf]*_0x5e6952[0x7],_0x3cce19[0x0]*_0x5e6952[0xf]+_0x3cce19[0x1]*_0x5e6952[0x6]-_0x3cce19[0x2]*_0x5e6952[0x5]+_0x3cce19[0x3]*_0x5e6952[0x4]+_0x3cce19[0x4]*_0x5e6952[0x3]-_0x3cce19[0x5]*_0x5e6952[0x2]+_0x3cce19[0x6]*_0x5e6952[0x1]-_0x3cce19[0x7]*_0x5e6952[0xe]+_0x3cce19[0x8]*_0x5e6952[0xd]-_0x3cce19[0x9]*_0x5e6952[0xc]+_0x3cce19[0xa]*_0x5e6952[0xb]-_0x3cce19[0xb]*_0x5e6952[0xa]+_0x3cce19[0xc]*_0x5e6952[0x9]-_0x3cce19[0xd]*_0x5e6952[0x8]+_0x3cce19[0xe]*_0x5e6952[0x7]+_0x3cce19[0xf]*_0x5e6952[0x0]];}static[_0x133bbc(0x27a)](_0x302624){return[_0x302624[0x0],-_0x302624[0x1],-_0x302624[0x2],-_0x302624[0x3],-_0x302624[0x4],-_0x302624[0x5],-_0x302624[0x6],-_0x302624[0x7],-_0x302624[0x8],-_0x302624[0x9],-_0x302624[0xa],_0x302624[0xb],_0x302624[0xc],_0x302624[0xd],_0x302624[0xe],_0x302624[0xf]];}static['applyMotor'](_0x2722af,_0x2b0cb8){const _0x547493=_0x133bbc;return PGA3D[_0x547493(0x1c0)](_0x2b0cb8,PGA3D[_0x547493(0x1c0)](_0x2722af,PGA3D[_0x547493(0x27a)](_0x2b0cb8)));}static[_0x133bbc(0x247)](_0x451a7f){const _0x2f4d2f=_0x133bbc;return Math[_0x2f4d2f(0x1f2)](_0x451a7f[_0x2f4d2f(0x1da)](_0x3b0afb=>_0x3b0afb*_0x3b0afb)['reduce']((_0x17b89d,_0x3966ee)=>_0x17b89d+_0x3966ee,0x0));}static['createTranslator'](_0x22b7e2,_0x52e6c1,_0x28aa45){return[0x1,0x0,0x0,0x0,-_0x22b7e2/0x2,-_0x52e6c1/0x2,-_0x28aa45/0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x133bbc(0x25e)](_0x18fbf5){return[0x1,0x0,0x0,0x0,_0x18fbf5[0x4],_0x18fbf5[0x5],_0x18fbf5[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static['createRotor'](_0x584233,_0x4632db=0x1,_0x1357c2=0x0,_0x3dbdb8=0x0,_0x2be94c=0x0,_0x25c010=0x0,_0x364bbc=0x0){const _0x5eed02=_0x133bbc;let _0x1d8c23=Math[_0x5eed02(0x254)](_0x584233/0x2),_0x5303d8=Math['sin'](_0x584233/0x2),_0xa534fa=PGA3D['createLine'](_0x2be94c,_0x25c010,_0x364bbc,_0x4632db,_0x1357c2,_0x3dbdb8);return[_0x1d8c23,_0x5303d8*_0xa534fa[0x1],_0x5303d8*_0xa534fa[0x2],_0x5303d8*_0xa534fa[0x3],_0x5303d8*_0xa534fa[0x4],_0x5303d8*_0xa534fa[0x5],_0x5303d8*_0xa534fa[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x133bbc(0x1ac)](_0x2f7f26){return[_0x2f7f26[0x0],_0x2f7f26[0x1],_0x2f7f26[0x2],_0x2f7f26[0x3],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x133bbc(0x21a)](_0x4e9ed0,_0x469b52,_0x52b1da){return[0x0,_0x52b1da,-_0x469b52,_0x4e9ed0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x133bbc(0x20d)](_0x4f546d,_0x133e37,_0x237578,_0x3c7c7f,_0x1fa515,_0x3d5c78){const _0x5fdf21=_0x133bbc;let _0x44ff18=PGA3D[_0x5fdf21(0x21a)](_0x3c7c7f,_0x1fa515,_0x3d5c78),_0x4642bd=PGA3D[_0x5fdf21(0x1d0)](_0x44ff18);return[0x0,_0x4642bd[0x1],_0x4642bd[0x2],_0x4642bd[0x3],-(-_0x4642bd[0x2]*_0x237578-_0x4642bd[0x1]*_0x133e37),-(_0x4642bd[0x1]*_0x4f546d-_0x4642bd[0x3]*_0x237578),-(_0x4642bd[0x3]*_0x133e37+_0x4642bd[0x2]*_0x4f546d),0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x133bbc(0x1b2)](_0x2ad8fe,_0x378eb3,_0x131d67){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,-_0x131d67,_0x378eb3,-_0x2ad8fe,0x0,0x0,0x0,0x0,0x0];}static[_0x133bbc(0x19a)](_0x30e08e){return[-_0x30e08e[0xa]/_0x30e08e[0x7],_0x30e08e[0x9]/_0x30e08e[0x7],-_0x30e08e[0x8]/_0x30e08e[0x7]];}static['createPlane'](_0x222e8f,_0xcd962e,_0x140480,_0x2e9e3f){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,_0x222e8f,_0xcd962e,_0x140480,-_0x2e9e3f,0x0];}static[_0x133bbc(0x20c)](_0x5cfb7a,_0x53ba08,_0x20c557){const _0x4403b0=_0x133bbc;let _0x2b462b=_0x53ba08[0x1]*_0x20c557[0x2]-_0x20c557[0x1]*_0x53ba08[0x2]-(_0x5cfb7a[0x1]*_0x20c557[0x2]-_0x20c557[0x1]*_0x5cfb7a[0x2])+(_0x5cfb7a[0x1]*_0x53ba08[0x2]-_0x53ba08[0x1]*_0x5cfb7a[0x2]),_0x27e3b7=_0x53ba08[0x0]*_0x20c557[0x2]-_0x20c557[0x0]*_0x53ba08[0x2]-(_0x5cfb7a[0x0]*_0x20c557[0x2]-_0x20c557[0x0]*_0x5cfb7a[0x2])+(_0x5cfb7a[0x0]*_0x53ba08[0x2]-_0x53ba08[0x0]*_0x5cfb7a[0x2]),_0x191d55=_0x53ba08[0x0]*_0x20c557[0x1]-_0x20c557[0x0]*_0x53ba08[0x1]-(_0x5cfb7a[0x0]*_0x20c557[0x1]-_0x20c557[0x0]*_0x5cfb7a[0x1])+(_0x5cfb7a[0x0]*_0x53ba08[0x1]-_0x53ba08[0x0]*_0x5cfb7a[0x1]),_0x398a48=_0x5cfb7a[0x0]*(_0x53ba08[0x1]*_0x20c557[0x2]-_0x20c557[0x1]*_0x53ba08[0x2])-_0x53ba08[0x0]*(_0x5cfb7a[0x1]*_0x20c557[0x2]-_0x20c557[0x1]*_0x5cfb7a[0x2])+_0x20c557[0x0]*(_0x5cfb7a[0x1]*_0x53ba08[0x2]-_0x53ba08[0x1]*_0x5cfb7a[0x2]);return PGA3D[_0x4403b0(0x24b)](_0x2b462b,-_0x27e3b7,_0x191d55,_0x398a48);}static[_0x133bbc(0x29b)](_0x191aff,_0x558d74){const _0x7cc18=_0x133bbc;let _0x5224ea=PGA3D[_0x7cc18(0x1c0)](_0x191aff,_0x558d74),_0x3b67ab=Math[_0x7cc18(0x24a)](_0x5224ea[0x7])<=1e-8,_0x307695=_0x3b67ab&&Math[_0x7cc18(0x24a)](_0x5224ea[0x8])<=1e-8&&Math[_0x7cc18(0x24a)](_0x5224ea[0x9])<=1e-8&&Math[_0x7cc18(0x24a)](_0x5224ea[0xa])<=1e-8;return[PGA3D[_0x7cc18(0x19a)](_0x5224ea),!_0x3b67ab,_0x307695];}static[_0x133bbc(0x1d0)](_0x362e76){const _0x402500=_0x133bbc;let _0x2f4471=PGA3D[_0x402500(0x247)](_0x362e76);if(_0x2f4471==0x0)return[0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];return _0x362e76[_0x402500(0x1da)](_0x1de101=>_0x1de101/_0x2f4471);}static[_0x133bbc(0x1a7)](_0x3ed3d0,_0x5acb99){const _0x2e747e=_0x133bbc;let _0x32ffea=PGA3D[_0x2e747e(0x281)](PGA3D[_0x2e747e(0x1b2)](_0x3ed3d0[0x0],_0x3ed3d0[0x1],_0x3ed3d0[0x2]),_0x5acb99);return PGA3D[_0x2e747e(0x19a)](_0x32ffea);}static[_0x133bbc(0x215)](_0x13bff2,_0x280385){const _0x567cf1=_0x133bbc;let _0x27fa70=PGA3D[_0x567cf1(0x1ac)](_0x280385),_0x1b0e07=PGA3D[_0x567cf1(0x281)](PGA3D[_0x567cf1(0x1b2)](_0x13bff2[0x0],_0x13bff2[0x1],_0x13bff2[0x2]),_0x27fa70);return PGA3D[_0x567cf1(0x19a)](_0x1b0e07);}static[_0x133bbc(0x205)](_0x40894e,_0x2e296e,_0x4933a0,_0x37798){const _0x4f5e75=_0x133bbc;let _0x4eede5=PGA3D[_0x4f5e75(0x1b2)](_0x40894e[0x0],_0x40894e[0x1],_0x40894e[0x2]),_0x9509a4=PGA3D[_0x4f5e75(0x1b2)](_0x2e296e[0x0],_0x2e296e[0x1],_0x2e296e[0x2]),_0x4c12c5=PGA3D[_0x4f5e75(0x1b2)](_0x4933a0[0x0],_0x4933a0[0x1],_0x4933a0[0x2]),_0x2ae4fa=PGA3D['createPoint'](_0x37798[0x0],_0x37798[0x1],_0x37798[0x2]),_0x112e9c=PGA3D[_0x4f5e75(0x20c)](_0x40894e,_0x2e296e,_0x4933a0),_0x1bf86f=PGA3D[_0x4f5e75(0x20c)](_0x37798,_0x2e296e,_0x4933a0),_0x22de31=PGA3D[_0x4f5e75(0x20c)](_0x40894e,_0x37798,_0x4933a0),_0x3272bc=PGA3D[_0x4f5e75(0x20c)](_0x40894e,_0x2e296e,_0x37798),_0x28ec67=_0x112e9c[0xb]*_0x112e9c[0xb]+_0x112e9c[0xc]*_0x112e9c[0xc]+_0x112e9c[0xd]*_0x112e9c[0xd]+_0x112e9c[0xe]*_0x112e9c[0xe],_0x380184=_0x112e9c[0xb]*_0x1bf86f[0xb]+_0x112e9c[0xc]*_0x1bf86f[0xc]+_0x112e9c[0xd]*_0x1bf86f[0xd]+_0x112e9c[0xe]*_0x1bf86f[0xe],_0x30f1ae=_0x112e9c[0xb]*_0x22de31[0xb]+_0x112e9c[0xc]*_0x22de31[0xc]+_0x112e9c[0xd]*_0x22de31[0xd]+_0x112e9c[0xe]*_0x22de31[0xe],_0x26d22a=_0x112e9c[0xb]*_0x3272bc[0xb]+_0x112e9c[0xc]*_0x3272bc[0xc]+_0x112e9c[0xd]*_0x3272bc[0xd]+_0x112e9c[0xe]*_0x3272bc[0xe],_0x1c634c=_0x380184/_0x28ec67,_0x26e542=_0x30f1ae/_0x28ec67,_0x44a065=_0x26d22a/_0x28ec67;return _0x1c634c>=0x0&&_0x1c634c<=0x1&&_0x26e542>=0x0&&_0x26e542<=0x1&&_0x44a065>=0x0&&_0x44a065<=0x1;}}class Camera{constructor(_0x53df1e,_0x565863){const _0x155f0d=_0x133bbc;this['_pose']=new Float32Array(Array(0x10)[_0x155f0d(0x22e)](0x0)),this['_pose'][0x0]=0x1,this['_focal']=new Float32Array(Array(0x2)['fill'](0.25)),this[_0x155f0d(0x216)]=new Float32Array([_0x53df1e,_0x565863]);}[_0x133bbc(0x228)](){const _0x199682=_0x133bbc;this[_0x199682(0x193)][0x0]=0x1;for(let _0x3bf3b8=0x1;_0x3bf3b8<0x10;++_0x3bf3b8)this[_0x199682(0x193)][_0x3bf3b8]=0x0;this[_0x199682(0x282)][0x0]=0x1,this[_0x199682(0x282)][0x1]=0x1;}[_0x133bbc(0x23c)](_0x46c13e){const _0xa48b37=_0x133bbc;for(let _0x294363=0x0;_0x294363<0x10;++_0x294363)this[_0xa48b37(0x193)][_0x294363]=_0x46c13e[_0x294363];}[_0x133bbc(0x252)](_0x4f7900,_0xbd25ee){const _0x363704=_0x133bbc;this[_0x363704(0x216)][0x0]=_0x4f7900,this[_0x363704(0x216)][0x1]=_0xbd25ee;}[_0x133bbc(0x2b4)](_0xf1f88){const _0x1fc72a=_0x133bbc,_0x3cc25a=PGA3D['applyMotorToDir']([0x1,0x0,0x0],this[_0x1fc72a(0x193)]),_0x3193d3=_0x3cc25a[0x0]*_0xf1f88,_0x4fa6ee=_0x3cc25a[0x1]*_0xf1f88,_0x293a81=_0x3cc25a[0x2]*_0xf1f88,_0x3cce59=PGA3D[_0x1fc72a(0x2b3)](_0x3193d3,_0x4fa6ee,_0x293a81);let _0x9da4dd=PGA3D[_0x1fc72a(0x1c0)](_0x3cce59,this[_0x1fc72a(0x193)]);_0x9da4dd=PGA3D[_0x1fc72a(0x1d0)](_0x9da4dd),this['updatePose'](_0x9da4dd);}[_0x133bbc(0x1a1)](_0x5996d0){const _0x47ed91=_0x133bbc,_0x1b80f1=PGA3D[_0x47ed91(0x215)]([0x0,0x1,0x0],this[_0x47ed91(0x193)]),_0x4ac11f=_0x1b80f1[0x0]*_0x5996d0,_0x144f1e=_0x1b80f1[0x1]*_0x5996d0,_0x334764=_0x1b80f1[0x2]*_0x5996d0,_0x12192d=PGA3D['createTranslator'](_0x4ac11f,_0x144f1e,_0x334764);let _0x42a7dc=PGA3D['geometricProduct'](_0x12192d,this['_pose']);_0x42a7dc=PGA3D[_0x47ed91(0x1d0)](_0x42a7dc),this[_0x47ed91(0x23c)](_0x42a7dc);}[_0x133bbc(0x2a3)](_0x543647){const _0x3ec1c7=_0x133bbc,_0x12f5ff=PGA3D['applyMotorToDir']([0x0,0x0,0x1],this['_pose']),_0x30b661=_0x12f5ff[0x0]*_0x543647,_0xc6ded0=_0x12f5ff[0x1]*_0x543647,_0x13572f=_0x12f5ff[0x2]*_0x543647,_0x34a0c2=PGA3D[_0x3ec1c7(0x2b3)](_0x30b661,_0xc6ded0,_0x13572f);let _0x3c786b=PGA3D[_0x3ec1c7(0x1c0)](_0x34a0c2,this[_0x3ec1c7(0x193)]);_0x3c786b=PGA3D[_0x3ec1c7(0x1d0)](_0x3c786b),this['updatePose'](_0x3c786b);}[_0x133bbc(0x270)](_0xb82b31){const _0x5f480a=_0x133bbc,_0x298612=PGA3D['applyMotorToPoint']([0x0,0x0,0x0],this['_pose']),_0x1c86f5=PGA3D['applyMotorToDir']([0x1,0x0,0x0],this[_0x5f480a(0x193)]),_0x3422a4=PGA3D[_0x5f480a(0x28c)](_0xb82b31,_0x1c86f5[0x0],_0x1c86f5[0x1],_0x1c86f5[0x2],_0x298612[0x0],_0x298612[0x1],_0x298612[0x2]);let _0xa5c271=PGA3D[_0x5f480a(0x1c0)](_0x3422a4,this[_0x5f480a(0x193)]);_0xa5c271=PGA3D[_0x5f480a(0x1d0)](_0xa5c271),this[_0x5f480a(0x23c)](_0xa5c271);}[_0x133bbc(0x1db)](_0xcdadad){const _0x1863b3=_0x133bbc,_0x293440=PGA3D[_0x1863b3(0x1a7)]([0x0,0x0,0x0],this[_0x1863b3(0x193)]),_0x5d7c3b=PGA3D[_0x1863b3(0x215)]([0x0,0x1,0x0],this[_0x1863b3(0x193)]),_0x3302b3=PGA3D[_0x1863b3(0x28c)](_0xcdadad,_0x5d7c3b[0x0],_0x5d7c3b[0x1],_0x5d7c3b[0x2],_0x293440[0x0],_0x293440[0x1],_0x293440[0x2]);let _0x3dacc2=PGA3D[_0x1863b3(0x1c0)](_0x3302b3,this['_pose']);_0x3dacc2=PGA3D[_0x1863b3(0x1d0)](_0x3dacc2),this['updatePose'](_0x3dacc2);}[_0x133bbc(0x2cd)](_0x356094){const _0x4de839=_0x133bbc,_0xee303a=PGA3D[_0x4de839(0x1a7)]([0x0,0x0,0x0],this[_0x4de839(0x193)]),_0x3d90a2=PGA3D[_0x4de839(0x215)]([0x0,0x0,0x1],this['_pose']),_0x4326c7=PGA3D[_0x4de839(0x28c)](_0x356094,_0x3d90a2[0x0],_0x3d90a2[0x1],_0x3d90a2[0x2],_0xee303a[0x0],_0xee303a[0x1],_0xee303a[0x2]);let _0xed1fa8=PGA3D[_0x4de839(0x1c0)](_0x4326c7,this['_pose']);_0xed1fa8=PGA3D[_0x4de839(0x1d0)](_0xed1fa8),this[_0x4de839(0x23c)](_0xed1fa8);}};export function createCanvas(){const _0x32f107=_0x133bbc,_0x24ca32=document[_0x32f107(0x265)](_0x32f107(0x2bc));return _0x24ca32['id']=_0x32f107(0x24f),document[_0x32f107(0x17e)][_0x32f107(0x1e0)](_0x24ca32),_0x24ca32;};export function createUIControls(){const _0x54aeba=_0x133bbc,_0x28ff1c=document[_0x54aeba(0x265)](_0x54aeba(0x204));_0x28ff1c[_0x54aeba(0x27c)]['position']=_0x54aeba(0x280),_0x28ff1c['style'][_0x54aeba(0x2c0)]=_0x54aeba(0x20f),_0x28ff1c[_0x54aeba(0x27c)][_0x54aeba(0x2c7)]=_0x54aeba(0x245),_0x28ff1c[_0x54aeba(0x27c)][_0x54aeba(0x1f4)]='15px',_0x28ff1c[_0x54aeba(0x27c)]['borderRadius']=_0x54aeba(0x251),_0x28ff1c[_0x54aeba(0x27c)][_0x54aeba(0x201)]='rgba(40,\x2044,\x2052,\x200.85)',_0x28ff1c[_0x54aeba(0x27c)][_0x54aeba(0x271)]=_0x54aeba(0x227),_0x28ff1c[_0x54aeba(0x27c)]['boxShadow']='0\x204px\x208px\x20rgba(0,\x200,\x200,\x200.5)',_0x28ff1c[_0x54aeba(0x27c)][_0x54aeba(0x1af)]=_0x54aeba(0x290),_0x28ff1c[_0x54aeba(0x27c)][_0x54aeba(0x219)]='#E9E9E9',_0x28ff1c['style']['width']=_0x54aeba(0x19c),_0x28ff1c[_0x54aeba(0x27c)][_0x54aeba(0x24c)]=_0x54aeba(0x2b8),_0x28ff1c[_0x54aeba(0x27c)][_0x54aeba(0x1dd)]='1000',_0x28ff1c[_0x54aeba(0x2ca)]=_0x54aeba(0x260),document[_0x54aeba(0x17e)][_0x54aeba(0x1e0)](_0x28ff1c);const _0x52b94b=document[_0x54aeba(0x265)](_0x54aeba(0x1b9));_0x52b94b['innerHTML']='−',_0x52b94b[_0x54aeba(0x27c)][_0x54aeba(0x1d8)]=_0x54aeba(0x280),_0x52b94b[_0x54aeba(0x27c)][_0x54aeba(0x2c0)]=_0x54aeba(0x251),_0x52b94b['style'][_0x54aeba(0x2c3)]=_0x54aeba(0x251),_0x52b94b[_0x54aeba(0x27c)]['padding']=_0x54aeba(0x261),_0x52b94b['style'][_0x54aeba(0x1fb)]=_0x54aeba(0x23e),_0x52b94b[_0x54aeba(0x27c)][_0x54aeba(0x212)]=_0x54aeba(0x1d7),_0x52b94b[_0x54aeba(0x27c)]['width']=_0x54aeba(0x1ed),_0x52b94b[_0x54aeba(0x27c)][_0x54aeba(0x23d)]=_0x54aeba(0x1ed),_0x52b94b[_0x54aeba(0x27c)][_0x54aeba(0x2c9)]=_0x54aeba(0x266),_0x52b94b[_0x54aeba(0x27c)][_0x54aeba(0x201)]=_0x54aeba(0x277),_0x52b94b['style'][_0x54aeba(0x271)]='none',_0x52b94b[_0x54aeba(0x27c)][_0x54aeba(0x226)]=_0x54aeba(0x1e8),_0x52b94b['style'][_0x54aeba(0x219)]=_0x54aeba(0x207);const _0x1d7bd9=_0x28ff1c[_0x54aeba(0x1c5)](_0x54aeba(0x263));let _0x49846e=![];return _0x52b94b[_0x54aeba(0x1f8)]('click',()=>{const _0x286312=_0x54aeba;_0x49846e?(_0x1d7bd9[_0x286312(0x21b)](_0x393305=>_0x393305[_0x286312(0x27c)][_0x286312(0x171)]=_0x286312(0x217)),_0x52b94b[_0x286312(0x2ca)]='−'):(_0x1d7bd9[_0x286312(0x21b)](_0x374dad=>_0x374dad[_0x286312(0x27c)]['display']=_0x286312(0x278)),_0x52b94b[_0x286312(0x2ca)]='+'),_0x49846e=!_0x49846e;}),_0x28ff1c[_0x54aeba(0x1e0)](_0x52b94b),_0x28ff1c;}export function setupCameraControls(_0x120f92,_0x17234c,_0x3f3ef4=0.05,_0x547f22=0.1){const _0x24aaf9=_0x133bbc;document[_0x24aaf9(0x1d2)](_0x24aaf9(0x292))[_0x24aaf9(0x1f8)](_0x24aaf9(0x29a),()=>{const _0x4985af=_0x24aaf9;_0x120f92[_0x4985af(0x2a3)](-_0x3f3ef4),_0x17234c[_0x4985af(0x2c8)]();}),document['getElementById'](_0x24aaf9(0x22a))[_0x24aaf9(0x1f8)]('click',()=>{const _0x20a616=_0x24aaf9;_0x120f92[_0x20a616(0x2a3)](_0x3f3ef4),_0x17234c[_0x20a616(0x2c8)]();}),document[_0x24aaf9(0x1d2)]('btnLeft')[_0x24aaf9(0x1f8)](_0x24aaf9(0x29a),()=>{const _0x574f0c=_0x24aaf9;_0x120f92[_0x574f0c(0x2b4)](-_0x3f3ef4),_0x17234c[_0x574f0c(0x2c8)]();}),document[_0x24aaf9(0x1d2)](_0x24aaf9(0x213))[_0x24aaf9(0x1f8)](_0x24aaf9(0x29a),()=>{const _0x4bfccd=_0x24aaf9;_0x120f92['moveX'](_0x3f3ef4),_0x17234c[_0x4bfccd(0x2c8)]();}),document['getElementById']('btnUp')[_0x24aaf9(0x1f8)]('click',()=>{const _0xabd383=_0x24aaf9;_0x120f92[_0xabd383(0x1a1)](_0x3f3ef4),_0x17234c[_0xabd383(0x2c8)]();}),document[_0x24aaf9(0x1d2)](_0x24aaf9(0x1f3))[_0x24aaf9(0x1f8)]('click',()=>{_0x120f92['moveY'](-_0x3f3ef4),_0x17234c['updateCameraPose']();}),document[_0x24aaf9(0x1d2)]('btnRotXPos')[_0x24aaf9(0x1f8)](_0x24aaf9(0x29a),()=>{const _0x5d246f=_0x24aaf9;_0x120f92[_0x5d246f(0x270)](_0x547f22),_0x17234c['updateCameraPose']();}),document['getElementById'](_0x24aaf9(0x26f))[_0x24aaf9(0x1f8)](_0x24aaf9(0x29a),()=>{const _0x4473ce=_0x24aaf9;_0x120f92[_0x4473ce(0x270)](-_0x547f22),_0x17234c[_0x4473ce(0x2c8)]();}),document[_0x24aaf9(0x1d2)](_0x24aaf9(0x258))['addEventListener']('click',()=>{const _0x499da7=_0x24aaf9;_0x120f92[_0x499da7(0x1db)](_0x547f22),_0x17234c[_0x499da7(0x2c8)]();}),document['getElementById']('btnRotYNeg')[_0x24aaf9(0x1f8)](_0x24aaf9(0x29a),()=>{_0x120f92['rotateY'](-_0x547f22),_0x17234c['updateCameraPose']();}),document[_0x24aaf9(0x1d2)](_0x24aaf9(0x19e))[_0x24aaf9(0x1f8)](_0x24aaf9(0x29a),()=>{const _0x28896d=_0x24aaf9;_0x120f92['rotateZ'](_0x547f22),_0x17234c[_0x28896d(0x2c8)]();}),document['getElementById']('btnRotZNeg')[_0x24aaf9(0x1f8)]('click',()=>{const _0x4f7b14=_0x24aaf9;_0x120f92['rotateZ'](-_0x547f22),_0x17234c[_0x4f7b14(0x2c8)]();});}export function setupTraceTypeControls(_0x3087c1){const _0x136acd=_0x133bbc;_0x3087c1[_0x136acd(0x174)](0x1);}export function setupLightControls(_0x4ce2d6){const _0x33f189=_0x133bbc,_0x207f9d=document[_0x33f189(0x1d2)](_0x33f189(0x17f)),_0x3fcbbd=document[_0x33f189(0x1d2)](_0x33f189(0x2bd)),_0x378cd7=document[_0x33f189(0x1d2)](_0x33f189(0x16e)),_0x3af711=document['getElementById'](_0x33f189(0x1f5)),_0x566e90=document[_0x33f189(0x1d2)](_0x33f189(0x1de)),_0x23508d=document['getElementById'](_0x33f189(0x25a)),_0xe84b47=document[_0x33f189(0x1d2)](_0x33f189(0x257)),_0x1315d0=document[_0x33f189(0x1d2)](_0x33f189(0x186));_0x566e90[_0x33f189(0x294)]=_0x207f9d[_0x33f189(0x1dc)],_0x23508d[_0x33f189(0x294)]=_0x3fcbbd[_0x33f189(0x1dc)],_0xe84b47['textContent']=_0x378cd7[_0x33f189(0x1dc)],_0x1315d0[_0x33f189(0x294)]=_0x3af711[_0x33f189(0x1dc)];function _0x42cc36(){const _0x2493c2=_0x33f189,_0x41a2ed=new Float32Array([parseFloat(_0x207f9d['value']),parseFloat(_0x3fcbbd[_0x2493c2(0x1dc)]),parseFloat(_0x378cd7[_0x2493c2(0x1dc)]),parseFloat(_0x3af711[_0x2493c2(0x1dc)]),0x1,0x1,0x1,0x0]);_0x566e90[_0x2493c2(0x294)]=parseFloat(_0x207f9d['value'])[_0x2493c2(0x1bb)](0x1),_0x23508d['textContent']=parseFloat(_0x3fcbbd[_0x2493c2(0x1dc)])['toFixed'](0x1),_0xe84b47['textContent']=parseFloat(_0x378cd7[_0x2493c2(0x1dc)])['toFixed'](0x1),_0x1315d0[_0x2493c2(0x294)]=parseFloat(_0x3af711['value'])['toFixed'](0x1),_0x4ce2d6[_0x2493c2(0x175)][_0x2493c2(0x1b3)][_0x2493c2(0x1f9)](_0x4ce2d6[_0x2493c2(0x1f7)],0x0,_0x41a2ed);}[_0x207f9d,_0x3fcbbd,_0x378cd7,_0x3af711][_0x33f189(0x21b)](_0x2e97bc=>_0x2e97bc[_0x33f189(0x1f8)](_0x33f189(0x25d),_0x42cc36));}function _0x3072(_0x5ee88d,_0x18e18d){const _0x64c7d0=_0x64c7();return _0x3072=function(_0x307203,_0x21f0f8){_0x307203=_0x307203-0x167;let _0x2c2b91=_0x64c7d0[_0x307203];return _0x2c2b91;},_0x3072(_0x5ee88d,_0x18e18d);}export function setupInterpolationControls(_0x2155e9){const _0x1abf80=_0x133bbc,_0x40902e=document[_0x1abf80(0x1d2)](_0x1abf80(0x256)),_0x2b6030=document[_0x1abf80(0x1d2)]('use-trilinear-value');_0x40902e['checked']=!![],_0x2b6030[_0x1abf80(0x294)]=_0x40902e['checked']?'on':_0x1abf80(0x296),_0x2155e9[_0x1abf80(0x232)](_0x40902e[_0x1abf80(0x18d)]),_0x40902e[_0x1abf80(0x1f8)](_0x1abf80(0x188),()=>{const _0x36c65b=_0x1abf80;_0x2b6030[_0x36c65b(0x294)]=_0x40902e[_0x36c65b(0x18d)]?'on':_0x36c65b(0x296),_0x2155e9['setUseTrilinear'](_0x40902e['checked']);});}export function setupTissueColorControls(_0xd2f40d){const _0x4095fa=_0x133bbc,_0x80870a=document[_0x4095fa(0x1ab)]('div[style*=\x22position:\x20absolute\x22]'),_0x13de34=document[_0x4095fa(0x265)](_0x4095fa(0x204));_0x13de34[_0x4095fa(0x2b7)]=_0x4095fa(0x1e3),_0x13de34[_0x4095fa(0x2ca)]='\x0a\x20\x20\x20\x20<h3>Tissue\x20Colors</h3>\x0a\x20\x20\x20\x20<div\x20class=\x22tissue-colors\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-picker-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22bone-boundary-color\x22>Bone\x20Boundary:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22bone-boundary-color\x22\x20value=\x22#f5e8db\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-preview\x22\x20id=\x22bone-boundary-preview\x22></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-picker-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22bone-interior-color\x22>Bone\x20Interior:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22bone-interior-color\x22\x20value=\x22#ebdbc7\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-preview\x22\x20id=\x22bone-interior-preview\x22></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-picker-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22white-matter-boundary-color\x22>White\x20Matter\x20Boundary:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22white-matter-boundary-color\x22\x20value=\x22#f29e8c\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-preview\x22\x20id=\x22white-matter-boundary-preview\x22></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-picker-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22white-matter-interior-color\x22>White\x20Matter\x20Interior:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22white-matter-interior-color\x22\x20value=\x22#eb9485\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-preview\x22\x20id=\x22white-matter-interior-preview\x22></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-picker-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22gray-matter-boundary-color\x22>Gray\x20Matter\x20Boundary:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22gray-matter-boundary-color\x22\x20value=\x22#e38c80\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-preview\x22\x20id=\x22gray-matter-boundary-preview\x22></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-picker-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22gray-matter-interior-color\x22>Gray\x20Matter\x20Interior:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22gray-matter-interior-color\x22\x20value=\x22#d87a73\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-preview\x22\x20id=\x22gray-matter-interior-preview\x22></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-picker-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22csf-color\x22>CSF\x20&\x20Other\x20Tissues:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22csf-color\x22\x20value=\x22#e6a699\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22color-preview\x22\x20id=\x22csf-preview\x22></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20';const _0x51239f=document[_0x4095fa(0x265)](_0x4095fa(0x27c));_0x51239f[_0x4095fa(0x294)]=_0x4095fa(0x262),document[_0x4095fa(0x25b)][_0x4095fa(0x1e0)](_0x51239f),_0x80870a['appendChild'](_0x13de34);function _0x36c528(_0x4dff89){const _0x4f2e01=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i['exec'](_0x4dff89);return _0x4f2e01?[parseInt(_0x4f2e01[0x1],0x10)/0xff,parseInt(_0x4f2e01[0x2],0x10)/0xff,parseInt(_0x4f2e01[0x3],0x10)/0xff]:[0x1,0x1,0x1];}function _0x457e07(_0x24b549,_0x16d333){const _0x3dbb99=_0x4095fa,_0x568ab0=document[_0x3dbb99(0x1d2)](_0x24b549);_0x568ab0[_0x3dbb99(0x27c)][_0x3dbb99(0x183)]=_0x16d333;}const _0x5c508e={'bone-boundary-color':{'id':'bone-boundary-preview','type':_0x4095fa(0x2ab)},'bone-interior-color':{'id':_0x4095fa(0x1fa),'type':_0x4095fa(0x2ae)},'white-matter-boundary-color':{'id':'white-matter-boundary-preview','type':_0x4095fa(0x196)},'white-matter-interior-color':{'id':_0x4095fa(0x22d),'type':_0x4095fa(0x1a9)},'gray-matter-boundary-color':{'id':_0x4095fa(0x1aa),'type':_0x4095fa(0x1ef)},'gray-matter-interior-color':{'id':_0x4095fa(0x1ea),'type':_0x4095fa(0x179)},'csf-color':{'id':'csf-preview','type':_0x4095fa(0x1eb)}};Object[_0x4095fa(0x21d)](_0x5c508e)[_0x4095fa(0x21b)](([_0x59b3d0,_0x35c481])=>{const _0x3d0d06=_0x4095fa,_0xcb1468=document[_0x3d0d06(0x1d2)](_0x59b3d0);_0x457e07(_0x35c481['id'],_0xcb1468[_0x3d0d06(0x1dc)]),_0xcb1468[_0x3d0d06(0x1f8)](_0x3d0d06(0x25d),()=>{_0x457e07(_0x35c481['id'],_0xcb1468['value']);}),_0xcb1468[_0x3d0d06(0x1f8)](_0x3d0d06(0x188),()=>{const _0x45d932=_0x3d0d06,_0x215194=_0x36c528(_0xcb1468['value']);_0xd2f40d[_0x45d932(0x2a2)](_0x35c481[_0x45d932(0x234)],_0x215194);});});}function _0x64c7(){const _0x45753a=['createComputePipeline','_outputSizeBuffer','_traceTypeBuffer','normalizeMotor','_textCanvas','getElementById','push','getContext','readBinary','getInt8','20px','position','computeProjectiveMain','map','rotateY','value','zIndex','light-x-value','draw','appendChild','renderToSelectedView','Volume\x20','control-section','1791700yKXbEa','ceil','store','TraceType\x20','pointer','_useTrilinear','gray-matter-interior-preview','csf','BYTES_PER_ELEMENT','24px','toggleVisibility','grayMatterBoundary','setPipeline','18px\x20Arial','sqrt','btnDown','padding','light-intensity','_lines','_lightBuffer','addEventListener','writeBuffer','bone-interior-preview','fontSize','Ray\x20Tracer\x20Shader','getFloat32','2280kjYBdv','_useTrilinearBuffer','3GzRSRx','background','_traceType','_sampler','div','isInside','_lineSpacing','#4A90E2','Camera\x20','now','getBindGroupLayout','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','createPlaneFromPoints','createLine','_pipeline','50px','_paddingx','then','lineHeight','btnRight','width','applyMotorToDir','_resolutions','block','_computeProjectivePipeline','color','createDir','forEach','_isProjective','entries','_tissueColorsBuffer','STORAGE_BINDING','fps:\x20','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','dispatchWorkgroups','rgba8unorm','</br>','getName','cursor','1px\x20solid\x20#4A90E2','resetPose','uint','btnBackward','_fontSize','_volumeBuffer','white-matter-interior-preview','fill','963998BzAoBB','clear','_context','setUseTrilinear','userAgent','type','Light\x20','880iNFrxL','_wgWidth','submit','max','buffer','split','updatePose','height','16px','computeMain','_dataBuffer','set','getFloat64','_pipelineLayout','render','10px','createShaders','motorNorm','Ray\x20Tracer\x20output\x20size\x20buffer','_filename','abs','createPlane','backdropFilter','DONE','Ray\x20Tracer\x20Pipeline','renderCanvas','Cache-Control','8px','updateSize','measureText','cos','Ray\x20Trace\x20Volume\x20Projective\x20Pipeline\x20','use-trilinear','light-z-value','btnRotYPos','_data','light-y-value','head','onerror','input','extractTranslator','_textFont','\x0a\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20.control-section\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding-bottom:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#4A90E2;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.control-section:last-child\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding-bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20h3\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#4A90E2;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20button\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2C3748;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#E9E9E9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#4A90E2;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x206px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x203px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background\x200.2s,\x20transform\x200.1s;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20button:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#3A4A61;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20button:active\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(0.98);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#4A90E2;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.button-row\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x208px;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20label\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20inline-block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2070px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2013px;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20input[type=\x22number\x22]\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2060px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2C3748;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#E9E9E9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#4A90E2;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2013px;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.value-display\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20inline-block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20right;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#4A90E2;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20<div\x20class=\x22control-section\x22>\x0a\x20\x20\x20\x20\x20\x20<h3>Camera\x20Controls</h3>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22button-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnForward\x22>Forward\x20(Z-)</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnBackward\x22>Backward\x20(Z+)</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22button-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnLeft\x22>Left\x20(X-)</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnRight\x22>Right\x20(X+)</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22button-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnUp\x22>Up\x20(Y+)</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnDown\x22>Down\x20(Y-)</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20<div\x20class=\x22control-section\x22>\x0a\x20\x20\x20\x20\x20\x20<h3>Rotation</h3>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22button-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnRotXPos\x22>Rotate\x20+X</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnRotXNeg\x22>Rotate\x20-X</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22button-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnRotYPos\x22>Rotate\x20+Y</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnRotYNeg\x22>Rotate\x20-Y</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22button-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnRotZPos\x22>Rotate\x20+Z</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22btnRotZNeg\x22>Rotate\x20-Z</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20<div\x20class=\x22control-section\x22>\x0a\x20\x20\x20\x20\x20\x20<h3>Light\x20Settings</h3>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22input-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22light-x\x22>X:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22light-x\x22\x20value=\x220.0\x22\x20step=\x220.1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22value-display\x22\x20id=\x22light-x-value\x22>0.0</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22input-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22light-y\x22>Y:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22light-y\x22\x20value=\x220.0\x22\x20step=\x220.1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22value-display\x22\x20id=\x22light-y-value\x22>0.0</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22input-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22light-z\x22>Z:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22light-z\x22\x20value=\x220.0\x22\x20step=\x220.1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22value-display\x22\x20id=\x22light-z-value\x22>0.0</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22input-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22light-intensity\x22>Intensity:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22light-intensity\x22\x20value=\x221.0\x22\x20step=\x220.1\x22\x20min=\x220\x22\x20max=\x225\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22value-display\x22\x20id=\x22light-intensity-value\x22>1.0</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20class=\x22control-section\x22>\x0a\x20\x20\x20\x20\x20\x20<h3>Volume\x20Settings</h3>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22input-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22use-trilinear\x22>Interpolation:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22use-trilinear\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22value-display\x22\x20id=\x22use-trilinear-value\x22>0</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','0\x205px','\x0a\x20\x20\x20\x20.color-picker-row\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20margin-bottom:\x206px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.color-picker-row\x20label\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x20120px;\x0a\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.color-picker-row\x20input[type=\x22color\x22]\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x2025px;\x0a\x20\x20\x20\x20\x20\x20height:\x2025px;\x0a\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20padding:\x200;\x0a\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.color-preview\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x2020px;\x0a\x20\x20\x20\x20\x20\x20height:\x2020px;\x0a\x20\x20\x20\x20\x20\x20border-radius:\x203px;\x0a\x20\x20\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#999;\x0a\x20\x20\x20\x20}\x0a\x20\x20','.control-section','13026bHNgCX','createElement','4px','createCommandEncoder','_width','fragmentMain','resize','length','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','_imgWidth','responseType','btnRotXNeg','rotateX','border','fillStyle','webgpu','setInt16','_computePipeline','response','transparent','none','_cameraBuffer','reverse','byteLength','style','Ray\x20Tracer\x20Renderer\x20Bind\x20Group','65106jaGcez','_canvasHeight','absolute','applyMotor','_focal','createBuffer','revokeObjectURL','transformOrigin','open','_wgHeight','createShaderModule','_volume','onload','configure','createRotor','center','ushort','innerWidth','\x27Roboto\x27,\x20\x27Segoe\x20UI\x27,\x20sans-serif','_canvasWidth','btnForward','updateTextRegion','textContent','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','off','createBindGroup','char','white','click','linePlaneIntersection','vertexMain','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','application/octet-stream','readyState','Ray\x20Tracer\x20Sampler','float','updateTissueColor','moveZ','COMPUTE','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','_clearColor','_dims','updateTissueColorsBuffer','1360198EdLpOb','_offScreenTexture','boneBoundary','_objectCnt','_bindGroupLayout','boneInterior','\x20Shader\x20','updateText','createGeometry','getUint16','createTranslator','moveX','linear','gpu','className','blur(5px)','30789pirViu','createObjectURL','double','canvas','light-y','beginRenderPass','readBytes','top','setBindGroup','read','right','Couldn\x27t\x20request\x20WebGPU\x20adapter.','compute','createBindGroupLayout','left','updateCameraPose','borderRadius','innerHTML','getUint8','Material\x20','rotateZ','1px\x20solid\x20red','_tracer','beginComputePass','_tissueColors','_canvasFormat','read-only-storage','_canvas','Network\x20error\x20loading\x20volume\x20byte\x20data','light-z','8829iISqjH','resizeCanvas','display','href','devicePixelRatio','setTraceType','_device','catch','hidden','_height','grayMatterInterior','UNIFORM','write','setTracerObject','_shaderModule','body','light-x','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','finish','init','backgroundColor','getPreferredCanvasFormat','getCurrentTexture','light-intensity-value','./shaders/optimized_tracevolumesimple.wgsl','change','getInt16','156XvRCty','15cwFjvj','GET','checked','TEXTURE_BINDING','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','createSampler','constructor','uchar','_pose','rgba(1,\x201,\x201,\x200.5)','match','whiteMatterBoundary','Ray\x20Tracing\x20Pipeline\x20','COPY_DST','no-cache,\x20no-store,\x20max-age=0','extractPoint','_imgHeight','260px','_camera','btnRotZPos','Ray\x20Trace\x20Volume\x20Orthogonal\x20Pipeline\x20','int','moveY','auto','_textContext','font','innerHeight','name','applyMotorToPoint','bind','whiteMatterInterior','gray-matter-boundary-preview','querySelector','extractRotor','_paddingtop','appendSceneObject','fontFamily','computeOrthogonalMain','requestAdapter','createPoint','queue','_sizes','createView','arraybuffer','createPipelineLayout','_bindGroup','button','TissueColors\x20','toFixed','updateCameraFocal','status','statusText','setRequestHeader','geometricProduct','_materialBuffer','updateGeometry','remove','74tYsllk','querySelectorAll','8QBizGo','end','createRenderPipeline','_objects','message','loadShader','data'];_0x64c7=function(){return _0x45753a;};return _0x64c7();};class StandardTextObject{constructor(_0x1497db,_0x146a78=0x5,_0x11742b=_0x133bbc(0x1f1)){const _0x4c1034=_0x133bbc;this[_0x4c1034(0x25f)]=_0x11742b,this['_lineSpacing']=_0x146a78,this['_textCanvas']=document['createElement']('canvas'),this[_0x4c1034(0x1a3)]=this[_0x4c1034(0x1d1)][_0x4c1034(0x1d4)]('2d'),this[_0x4c1034(0x293)](_0x1497db),this[_0x4c1034(0x2b0)](_0x1497db),this[_0x4c1034(0x1d1)][_0x4c1034(0x27c)][_0x4c1034(0x1d8)]=_0x4c1034(0x280),this['_textCanvas'][_0x4c1034(0x27c)][_0x4c1034(0x2c0)]=_0x4c1034(0x245),this[_0x4c1034(0x1d1)][_0x4c1034(0x27c)][_0x4c1034(0x2c7)]=_0x4c1034(0x245),this[_0x4c1034(0x1d1)]['style'][_0x4c1034(0x271)]=_0x4c1034(0x2ce),document[_0x4c1034(0x17e)][_0x4c1034(0x1e0)](this['_textCanvas']);}[_0x133bbc(0x1ee)](){const _0x563577=_0x133bbc;this[_0x563577(0x1d1)]['hidden']=!this[_0x563577(0x1d1)][_0x563577(0x177)];}['updateTextRegion'](_0x38eb3c){const _0xb2e780=_0x133bbc;this[_0xb2e780(0x1a3)][_0xb2e780(0x1a4)]=this['_textFont'],this['_lines']=_0x38eb3c[_0xb2e780(0x23b)]('\x0a'),this[_0xb2e780(0x268)]=Math[_0xb2e780(0x239)](...this[_0xb2e780(0x1f6)]['map'](_0x3ff62f=>this[_0xb2e780(0x1a3)][_0xb2e780(0x253)](_0x3ff62f)[_0xb2e780(0x214)]));const _0x2f647b=this[_0xb2e780(0x25f)][_0xb2e780(0x195)](/(\d+)px/);_0x2f647b?this[_0xb2e780(0x22b)]=parseInt(_0x2f647b[0x1],0xa):(this[_0xb2e780(0x22b)]=0x12,this[_0xb2e780(0x25f)]=_0xb2e780(0x1f1)),this[_0xb2e780(0x178)]=this['_lines']['length']*(this[_0xb2e780(0x22b)]+this[_0xb2e780(0x206)]),this[_0xb2e780(0x210)]=0x5,this[_0xb2e780(0x1ad)]=0x3,this[_0xb2e780(0x291)]=Math[_0xb2e780(0x1e5)](this[_0xb2e780(0x268)]+this[_0xb2e780(0x210)]*0x2),this['_canvasHeight']=Math['ceil'](this['_height']+this['_paddingtop']),this[_0xb2e780(0x1d1)][_0xb2e780(0x214)]=this['_canvasWidth'],this[_0xb2e780(0x1d1)][_0xb2e780(0x23d)]=this[_0xb2e780(0x27f)],this['_textContext'][_0xb2e780(0x1a4)]=this['_textFont'],this[_0xb2e780(0x1a3)]['textBaseline']=_0xb2e780(0x2c0);}[_0x133bbc(0x2b0)](_0x47debc){const _0xfe8cd5=_0x133bbc;this[_0xfe8cd5(0x1f6)]=_0x47debc[_0xfe8cd5(0x23b)]('\x0a'),this['_textContext'][_0xfe8cd5(0x272)]=_0xfe8cd5(0x194),this[_0xfe8cd5(0x1a3)]['clearRect'](0x0,0x0,this[_0xfe8cd5(0x291)],this[_0xfe8cd5(0x27f)]),this[_0xfe8cd5(0x1a3)]['fillRect'](0x0,0x0,this[_0xfe8cd5(0x291)],this['_canvasHeight']),this['_textContext']['fillStyle']=_0xfe8cd5(0x299),this['_lines']['forEach']((_0x50d861,_0x4ea853)=>{const _0x269783=_0xfe8cd5,_0x3b7be4=this['_paddingx'],_0x5491e9=this[_0x269783(0x1ad)]+_0x4ea853*(this[_0x269783(0x22b)]+this[_0x269783(0x206)]);this['_textContext']['fillText'](_0x50d861,_0x3b7be4,_0x5491e9);});}};export function setupRenderLoop(_0x5113f1,_0x1cf043=0x3c){const _0x21ced1=_0x133bbc;let _0x1532e9='??';const _0x54b4a8=new StandardTextObject(_0x21ced1(0x220)+_0x1532e9);let _0x30f94b=0x0;const _0x23754a=0x1/_0x1cf043,_0x49e07a=_0x23754a*0x3e8;let _0x2d5aa9=Date[_0x21ced1(0x209)]();const _0x21943e=()=>{const _0xd9e2ed=_0x21ced1;let _0xc5d7bb=Date[_0xd9e2ed(0x209)]()-_0x2d5aa9;_0xc5d7bb>_0x49e07a&&(++_0x30f94b,_0x2d5aa9=Date[_0xd9e2ed(0x209)]()-_0xc5d7bb%_0x49e07a,_0x5113f1[_0xd9e2ed(0x244)]()),requestAnimationFrame(_0x21943e);};return _0x21943e(),setInterval(()=>{const _0x29f981=_0x21ced1;_0x54b4a8[_0x29f981(0x2b0)](_0x29f981(0x220)+_0x30f94b),_0x30f94b=0x0;},0x3e8),{'fpsText':_0x54b4a8,'getFrameCount':()=>_0x30f94b};};export async function initApp(){const _0x30ffaa=_0x133bbc,_0x10f42c=createCanvas(),_0x2508ff=new RayTracer(_0x10f42c);await _0x2508ff[_0x30ffaa(0x182)]();const _0x5daa6a=new Camera(),_0x4855c9=new VolumeRenderingSimpleObject(_0x2508ff[_0x30ffaa(0x175)],_0x2508ff[_0x30ffaa(0x16a)],_0x5daa6a);await _0x2508ff[_0x30ffaa(0x17c)](_0x4855c9),createUIControls();const _0xa8df20=0.05,_0x265e78=0.1;return setupCameraControls(_0x5daa6a,_0x4855c9,_0xa8df20,_0x265e78),setupLightControls(_0x4855c9),setupTraceTypeControls(_0x4855c9),setupRenderLoop(_0x2508ff),setupInterpolationControls(_0x4855c9),setupTissueColorControls(_0x4855c9),_0x2508ff;}export function handleInitError(_0x22e851){const _0x3a1910=_0x133bbc,_0x277f15=document[_0x3a1910(0x265)]('p');_0x277f15[_0x3a1910(0x2ca)]=navigator[_0x3a1910(0x233)]+_0x3a1910(0x224)+_0x22e851[_0x3a1910(0x1ca)],document['body'][_0x3a1910(0x1e0)](_0x277f15);const _0xf3e459=document['getElementById'](_0x3a1910(0x24f));_0xf3e459&&_0xf3e459[_0x3a1910(0x1c3)]();};initApp()[_0x133bbc(0x211)](_0xb0038b=>{console['log'](_0xb0038b);})[_0x133bbc(0x176)](_0x53894c=>{handleInitError(_0x53894c);});
